import{_ as y,D as l,o as p,c as e,I as h,w as k,a as E,k as t,R as F}from"./chunks/framework.Tt2DsVC6.js";const o={data(){return{fileList:[]}},methods:{handleHttpRequest(s){const i=new FormData;i.append("file",s.file),fetch("https://jsonplaceholder.typicode.com/posts/",{method:"POST",body:i}).then(a=>a.json()).then(a=>{s.onSuccess()}).catch(a=>{s.onError()})},handleChange(s,i){console.log("handleChange"),this.fileList=i,this.$refs.upload.submit()},handleBeforeUpload(s){const i=s.type==="image/jpeg"||s.type==="image/png",a=s.size/1024/1024<2;return i||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),i&&a},handleExceed(s,i){this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${s.length} 个文件，共选择了 ${s.length+i.length} 个文件`)},handleSuccess(s,i,a){this.$message.success("上传成功")},handleError(s,i,a){console.log("err",s),console.log("file",i),console.log("fileList",a),this.$message.error("上传失败")}}},c={class:"app-container"};function C(s,i,a,A,r,n){const d=l("el-button"),g=l("el-upload",!0);return p(),e("div",c,[h(g,{ref:"upload",action:"","file-list":r.fileList,limit:2,"auto-upload":!1,"http-request":n.handleHttpRequest,"before-upload":n.handleBeforeUpload,"on-change":n.handleChange,"on-exceed":n.handleExceed,"on-success":n.handleSuccess,"on-error":n.handleError},{default:k(()=>[h(d,{type:"primary"},{default:k(()=>[E("点击上传")]),_:1})]),_:1},8,["file-list","http-request","before-upload","on-change","on-exceed","on-success","on-error"])])}const B=y(o,[["render",C]]),u=t("h1",{id:"element-自定义上传",tabindex:"-1"},[E("Element 自定义上传 "),t("a",{class:"header-anchor",href:"#element-自定义上传","aria-label":'Permalink to "Element 自定义上传"'},"​")],-1),f=F("",4),_=JSON.parse('{"title":"Element 自定义上传","description":"","frontmatter":{},"headers":[],"relativePath":"blog/tools/el-upload.md","filePath":"blog/tools/el-upload.md","lastUpdated":1745971043000}'),m={name:"blog/tools/el-upload.md"},q=Object.assign(m,{setup(s){return(i,a)=>(p(),e("div",null,[u,h(B),f]))}});export{_ as __pageData,q as default};
